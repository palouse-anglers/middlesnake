% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/clean_nrcs_data.R
\name{clean_nrcs_data}
\alias{clean_nrcs_data}
\title{Clean and Consolidate Duplicated NRCS Practices Data}
\usage{
clean_nrcs_data(dataset_path, huc_12_codes)
}
\arguments{
\item{dataset_path}{A character string indicating the path to the \code{.xlsx} Excel file to read.}

\item{huc_12_codes}{A character vector of HUC12 watershed codes to verify against the dataset.}
}
\value{
A \code{data.frame} containing:
\itemize{
\item Cleaned and standardized variable names
\item Duplicate detection variables: \code{duplicates_id_yr_code}, \code{duplicates_id_yr_code_amt}
\item Duplicated rows, each representing a unique \code{land_unit_id}–\code{practice_code}–\code{applied_year}
\item \code{applied_amount} updated to reflect the total for grouped duplicates
}
}
\description{
This function reads an Excel file containing NRCS practice data, standardizes column names,
checks whether the user-supplied HUC12 watershed codes are present, flags duplicated practice
entries, and returns a cleaned, dataset with total applied amounts per group.
}
\details{
Duplicate records are defined in two stages:
\enumerate{
\item By \code{land_unit_id}, \code{practice_code}, and \code{applied_year} (\code{duplicates_id_yr_code})
\item By the same fields plus \code{applied_amount} (\code{duplicates_id_yr_code_amt})
}

If \code{applied_amount}  has different values for the same\code{land_unit_id}, \code{practice_code}, and \code{applied_year},
then \code{applied_amount} is summed

If \code{applied_amount}  has multiple of the same values by \code{land_unit_id}, \code{practice_code}, and \code{applied_year},
then those records are considered true duplicates and removed

The original dataset names will be cleaned to lowercase snake_case
using \code{janitor::clean_names()}.
}
\examples{
\dontrun{
clean_nrcs_data(
  dataset_path = "data/nrcs_practices.xlsx",
  huc_12_codes = c("170601010101", "170601010102")
)
}

}
